---
title: "Handling the \"undefined\" Case in TypeScript Arrays"
slug: "undefined-case-in-typescript-array"
date: "2025/08/21"
---

<span className="emoji-large">â‰ï¸ ğŸ¤”</span>

My code from the *`Easter Eggs Festival`* project:

```
// Type alias
type EggItem = {
  id: number;
  image: string;
  value: number;
};

// Get each egg value
function generateEggs(count: number): EggItem[] {
  const eggsValues: number[] = [];
  while (eggsValues.length < count) {
    const eggValue: number = getRandomInt(1, 12);
    if (!eggsValues.includes(eggValue)) eggsValues.push(eggValue);
  }

	// Return a new array with updated egg items.
    return Array.from({ length: count }, (_, i) => ({
    id: i + 1,
    image: `/assets/images/egg-${i + 1}`,
    value: eggsValues[i],
  }));
}

// Generate random value for each egg and store in state
const [eggs] = useState<EggItem[]>(() => generateEggs(4));
```

The **TypeScript language service** (a.k.a. tsserver) that is built into VSCode will mark the `return` keyword by a red squiggly line when the variable is strictly typed as `number` yet has the potential to be `undefined`.

<p>VSCodeâ€™s strict type-checking throws this error:</p>

```
Type '{ id: number; image: string; value: number | undefined; }[]' is not assignable to type 'EggItem[]'.
Type '{ id: number; image: string; value: number | undefined; }' is not assignable to type 'EggItem'.
Types of property 'value' are incompatible.
Type 'number | undefined' is not assignable to type 'number'.
Type 'undefined' is not assignable to type 'number'.ts(2322)
```

Because `eggsValues` starts as an empty array, accessing `eggsValues[i]` can yield `undefined`, so TypeScript infers `number | undefined`.

<p>There are a few possible ways to resolve this issue, you can:</p>

<p>1. Use a union type and handle `undefined`.</p>

```
type EggItem = {
  id: number;
  image: string;
  value: number | undefined;
};
```

<p>2. Provide a default value by using the **nullish coalescing operator** `??` to default it to `0` if it is `undefined` or `null`.</p>

```
value: eggsValues[i] ?? 0;
```

<p>3. Type guard it conditionally to check ifÂ `value`Â is notÂ undefined or set it to `0`.</p>

```
value: eggsValues[i] !== undefined ? eggsValues[i] : 0;
```

<p>4. Use the **non-null assertion operator** `!` if you are certain that `value` is not `undefined`.</p>

```
value: eggsValues[i]!;
```

<p>5. Or, simply use `.map()` to return a new array for the `eggsValues` and keep `value` preserved. This is the cleanest solution since every value is guaranteed as a `number`:</p>

```
 return eggsValues.map((value, i) => ({
    id: i + 1,
    image: `/assets/images/egg-${i + 1}`,
    value,
  }));
```

<p>So, here again, the type alias was initialized like this:</p>

```
type EggItem = {
  id: number;
  image: string;
  value: number; // The type is then guaranteed here!
};
```

**Valuable lesson learned:** guard your types, and define your code thoughtfully. <span className="emoji-small">ğŸ˜</span>
